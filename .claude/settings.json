{
  "commands": {
    "sync-push": {
      "description": "Push user-level changes to linked project repos",
      "prompt": "I need to push user-level configuration changes to linked project repos with full automation. Please:\n\n1. Read my ~/.claude/settings.json to identify sync groups\n2. Read .claude/sync-manifest.json in this repo to understand current state\n3. Compare versions and detect changes\n4. Show me which linked repos will receive updates AND ASK FOR APPROVAL:\n   - List each repo that will get worktrees created\n   - Show what changes will be made to each\n   - Ask: 'Create worktrees and push to these repos? [Yes to all] [Select specific] [Cancel]'\n   - Wait for user confirmation before proceeding\n5. CHECK SSH SETUP (CRITICAL - refer to automation/ssh-setup in XML docs):\n   a. Test if SSH keys exist: ls ~/.ssh/id_ed25519*\n   b. Test if SSH works: ssh -T git@github.com\n   c. If keys missing: Generate with ssh-keygen -t ed25519\n   d. If keys exist but not added to GitHub: Show public key and wait for user to add it\n   e. Test git remote uses SSH: git remote get-url origin\n   f. If HTTPS: Convert to SSH format\n6. CHECK GH CLI (for automatic PR creation):\n   a. Test if gh installed: which gh\n   b. If not installed: Prompt user to install (brew install gh)\n   c. Test if authenticated: gh auth status\n   d. If not authenticated: Run gh auth login\n7. For each repo:\n   - Create or switch to sync worktree (pattern: {repo-name}-sync)\n   - Update .claude/settings.json in worktree\n   - Update sync-manifest.json with new version, changelog, timestamp\n   - Commit with message: 'sync: Update {group-name} v{version} by {author} - {changes}'\n   - Push branch to remote\n   - AUTOMATICALLY CREATE PR using gh pr create with detailed description (see pr-template in XML)\n   - Capture PR URL from output\n8. Display summary with clickable PR links:\n   âœ… Sync complete! Pushed to N repos:\n   - repo-1: [PR URL]\n   - repo-2: [PR URL]\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml automation section for complete SSH setup flow and PR template."
    },
    "sync-pull": {
      "description": "Pull project-level changes to user settings",
      "prompt": "I need to sync project-level configuration changes to my user settings. Please:\n\n1. Read .claude/sync-manifest.json in this repo\n2. Read my ~/.claude/settings.json\n3. Compare versions for each sync group\n4. For each difference:\n   - Show detailed diff (NEW, UPDATED, REMOVED commands)\n   - Show author, date, version, changes\n5. Ask for confirmation\n6. If approved:\n   - Create backup: ~/.claude/settings.json.backup-{timestamp}\n   - Merge changes into my user settings\n   - Update user feature registry\n   - Update ~/.zshrc if needed\n7. Confirm sync complete with backup location\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for safety features."
    },
    "sync-status": {
      "description": "Check sync status across repos and user settings",
      "prompt": "Show me the sync status of all my repositories and user features. Please:\n\n1. Read my ~/.claude/settings.json to get:\n   - Linked repos list\n   - User features registry\n   - Favorites configuration\n2. For each linked repo:\n   - Check if .claude/sync-manifest.json exists\n   - Compare versions with my user settings\n   - Show: Repo name, sync groups, versions (user vs project), status (âœ… up-to-date, âš ï¸  outdated, âŒ not synced)\n3. Show summary:\n   - Total repos: X\n   - Up to date: X\n   - Need sync: X\n   - Total features: X (favorites: X, shared: X, personal: X)\n   - Last sync check: {timestamp}\n4. Offer quick actions: [Sync all] [Sync specific] [Manage favorites]\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for status display format."
    },
    "sync-diff": {
      "description": "Show differences between user and project settings",
      "prompt": "Show me detailed differences between my user settings and this project's settings. Please:\n\n1. Read .claude/sync-manifest.json (project)\n2. Read ~/.claude/settings.json (user)\n3. For each sync group, show:\n   ```diff\n   ğŸ“ Changes in {group-name} sync group:\n\n   NEW COMMAND:\n   + /{command-name}\n   +   Description: {desc}\n   +   Script: {script}\n\n   UPDATED COMMAND:\n   ~ /{command-name}\n   ~   {what-changed}\n\n   REMOVED COMMAND:\n   - /{command-name}\n\n   VERSION: v{user-version} â†’ v{project-version}\n   AUTHOR: {author}\n   DATE: {date}\n   ```\n4. Highlight breaking changes if any\n5. Show files that will be modified\n6. Offer: [Apply changes] [Skip]\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for diff format."
    },
    "features-list": {
      "description": "List all user features with status",
      "prompt": "Show me my complete user features dashboard. Please:\n\n1. Read ~/.claude/settings.json to get user features registry\n2. Scan all linked repos for available features I don't have\n3. Display organized dashboard:\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n           YOUR USER FEATURES DASHBOARD\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ­ FAVORITES (Auto-add to new repos)\nâ”œâ”€ {feature-name} v{version}\nâ”‚  â””â”€ Shared with: {repo-list}\nâ”‚  â””â”€ Source: {source} ({author})\nâ”‚  â””â”€ Last updated: {date}\n\nğŸ¤ SHARED WITH TEAM (In sync system)\nâ”œâ”€ {feature-name} v{version}\nâ”‚  â””â”€ Shared with: {repo-list}\nâ”‚  â””â”€ Source: {source}\n\nğŸ”’ PERSONAL ONLY (Not shared - Consider sharing?)\nâ”œâ”€ {feature-name} v{version}\nâ”‚  â””â”€ Note: {note}\nâ”‚  â””â”€ ğŸ’¡ Suggestion: {suggestion}\nâ”‚  â””â”€ [Share Now] [Keep Private]\n\nğŸŒ AVAILABLE FROM TEAM (Discovered from repos)\nâ”œâ”€ {feature-name} v{version}\nâ”‚  â””â”€ Found in: {repo} (by {author})\nâ”‚  â””â”€ Description: {desc}\nâ”‚  â””â”€ [Add to my settings] [Add as Favorite]\n\nğŸ“Š SUMMARY\nâ€¢ Total features: X (X favorites, X shared, X personal, X available)\nâ€¢ Linked repos: X\nâ€¢ Source of truth: Your user settings\nâ€¢ Last sync check: X minutes ago\n\n[Organize] [Discover More] [Share Personal Features] [Settings]\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for dashboard format."
    },
    "features-add": {
      "description": "Add a new user feature to your collection",
      "prompt": "Guide me through adding a new user feature. Please:\n\n1. Ask: 'Add a new user feature! Where is this feature from?'\n   Options: [Current repo] [Another repo] [Create new]\n\n2. If 'Another repo':\n   - Ask for repo path or URL\n   - Scan for .claude/sync-manifest.json\n   - List available sync groups with versions and authors\n   - Let me select which to add\n   - Show: version, author, description, commands included\n   - Ask: 'â­ Add to Favorites? [Yes] [No]'\n   - Ask: 'ğŸ¤ Share with your team repos? [Yes] [No] [Ask me later]'\n   - If sharing: Show checkboxes for linked repos\n   - Execute:\n     * Copy feature to ~/.claude/settings.json\n     * Add to favorites list if requested\n     * Create sync worktrees in selected repos\n     * Update sync-manifest.json in each repo\n     * Commit with attribution\n     * Update user feature registry\n   - Confirm: 'Added {feature} to: Your user settings (as favorite), {repo-list}'\n\n3. If 'Current repo':\n   - Similar flow but source is current repo\n\n4. If 'Create new':\n   - Ask for feature name, description\n   - Ask about commands to include\n   - Show: 'Your current favorites will also be included when sharing: {list}'\n   - Ask: 'Include favorites automatically?'\n   - Create bundled sync group\n   - Guide through setup\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml Flow D for detailed steps."
    },
    "features-share": {
      "description": "Share a personal feature with team repos",
      "prompt": "Help me share my personal features with team repos. Please:\n\n1. Read ~/.claude/settings.json to find personal-only features\n2. Show list with usage stats if available:\n   ```\n   ğŸ“¦ {feature-name} v{version}\n      - {X} commands, {Y} uses this month\n      - Most used: {command-list}\n      - Source: local\n      - Note: {note}\n\n   [Share this] [Keep private] [Details]\n   ```\n3. When I select features to share:\n   - Ask which linked repos to share with\n   - Show preview of what will be added\n4. Execute:\n   - Create sync worktrees in selected repos\n   - Update sync-manifest.json\n   - Commit: 'sync: Add {feature} v{version} by {author}'\n   - Update user feature registry (move from Personal to Shared)\n5. Confirm: 'Shared {feature} with {repo-list}. Team will be notified on next pull!'\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml Flow G."
    },
    "features-discover": {
      "description": "Discover features teammates have that you don't",
      "prompt": "Show me features available from my team that I don't have yet. Please:\n\n1. Read my ~/.claude/settings.json to get:\n   - Linked repos list\n   - Current user features\n2. For each linked repo:\n   - Read .claude/sync-manifest.json\n   - Identify sync groups I don't have\n3. Display discovered features:\n   ```\n   ğŸŒ AVAILABLE FROM TEAM\n\n   ğŸ“¦ {feature-name} v{version}\n      Author: {author}\n      Found in: {repo-name}\n      Date: {date}\n      Description: {description}\n\n      Commands included:\n      - /{command-1} - {desc}\n      - /{command-2} - {desc}\n\n      [Add to my settings] [Add as Favorite] [Tell me more]\n   ```\n4. When I select a feature:\n   - Show detailed preview\n   - Ask if should be favorite\n   - Add to my user settings\n   - Update registry\n5. Suggest: 'Found {X} new features from your team!'\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for discovery flow."
    },
    "features-organize": {
      "description": "Organize favorites and manage user features",
      "prompt": "Help me organize my user features and favorites. Please:\n\n1. Read ~/.claude/settings.json\n2. Show interactive menu:\n   ```\n   ğŸ¯ ORGANIZE USER FEATURES\n\n   What would you like to do?\n\n   ğŸ“Œ Manage Favorites\n      - Add feature to favorites\n      - Remove from favorites\n      - Reorder favorites\n      Current favorites: {list}\n\n   ğŸ·ï¸  Update Metadata\n      - Change feature description\n      - Add/edit notes\n      - Update version manually\n\n   ğŸ§¹ Clean Up\n      - Remove unused features\n      - Archive old versions\n      - Clear sync history\n\n   ğŸ”— Dependencies\n      - View feature dependencies\n      - Check for conflicts\n      - Resolve issues\n\n   âš™ï¸  Settings\n      - Configure auto-add for new repos\n      - Set sync preferences\n      - Manage linked repos\n\n   [Select option]\n   ```\n3. Execute selected action\n4. Update ~/.claude/settings.json\n5. Ask: 'Sync changes to linked repos?' if applicable\n\nRefer to .claude/docs/INTERNAL-INSTALL-HELPER.xml for organization options."
    }
  }
}
